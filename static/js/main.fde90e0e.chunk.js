(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{131:function(e,t,n){e.exports={content:"News_content__3DInM"}},136:function(e,t,n){e.exports={content:"Profile_content__2xYUA"}},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(1),a=n.n(s),i=n(66),o=n.n(i),c=(n(169),n(20)),u=n(21),l=n(23),d=n(22),j=(n.p,n(170),n(171),function(e){return Object(r.jsx)("div",{children:"Music"})}),p=n(131),f=n.n(p),h=function(e){return Object(r.jsx)("div",{className:f.a.content,children:"News"})},b=(n(172),function(e){return Object(r.jsx)("div",{children:"Settings"})}),O=n(12),g=n(11),m=n(9),x=n(3),v=function(e){return{isAuth:e.auth.isAuth}},_=function(e){var t=function(t){Object(l.a)(s,t);var n=Object(d.a)(s);function s(){return Object(c.a)(this,s),n.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return this.props.isAuth?Object(r.jsx)(e,Object(x.a)({},this.props)):Object(r.jsx)(O.a,{to:"/login"})}}]),s}(a.a.Component);return Object(g.b)(v)(t)},w=n(29),C="ADD-MESSAGE",k={dialogs:[{id:1,name:"\u0414\u0438\u043c\u0430"},{id:2,name:"\u041b\u0435\u043d\u0430"},{id:3,name:"\u0410\u043d\u0434\u0440\u0435\u0439"},{id:4,name:"\u0418\u0432\u0430\u043d"}],messages:[{id:1,message:"Hi!"},{id:2,message:"How are you?"},{id:3,message:"How are you?"}]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:var n=t.newDialogBody;return Object(x.a)(Object(x.a)({},e),{},{messages:[].concat(Object(w.a)(e.messages),[{id:6,message:n}])});default:return e}},S=n(30),y=n.n(S),T=function(e){return Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:y.a.message,children:e.message})})},N=n(13),I=function(e){var t="/dialogs/".concat(e.id);return Object(r.jsx)("div",{children:Object(r.jsx)(N.b,{to:t,className:y.a.dialog,activeClassName:y.a.activeLink,children:e.name})})},F=n(128),U=n(33),E=n(129),D=n(138),A=n(53),L=n.n(A),M=function(e){return function(t){var n=t.input,s=t.meta,i=Object(D.a)(t,["input","meta"]),o=s.touched&&s.error;return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:L.a.formControl+" "+(o?L.a.error:""),children:[a.a.createElement(e,Object(x.a)(Object(x.a)({},n),i)),o&&Object(r.jsx)("span",{children:s.error})]})})}},z=M("input"),B=M("textarea"),H=function(e){if(!e)return"Field is required"},G=function(e){return function(t){if(t&&t.length>e)return"Max length has been ".concat(e)}},R=G(30),J=Object(E.a)({form:"newDialog",onSubmitSuccess:function(e,t){return t(Object(U.a)("newDialog"))}})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(F.a,{component:B,name:"newDialogBody",validate:[H,R],placeholder:"New message"})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Add message"})})]})})),W=function(e){var t=e.dialogs.map((function(e){return Object(r.jsx)(I,{name:e.name,id:e.id})})),n=e.messages.map((function(e){return Object(r.jsx)(T,{message:e.message})}));return Object(r.jsxs)("div",{className:y.a.dialogs,children:[Object(r.jsx)("div",{className:y.a.dialogsItems,children:t}),Object(r.jsxs)("div",{className:y.a.messages,children:[Object(r.jsx)("div",{children:n}),Object(r.jsx)(J,{onSubmit:function(t){e.addMessage(t.newDialogBody)}})]})]})},q=Object(m.d)(Object(g.b)((function(e){return{messages:e.dialogsPage.messages,newMessageText:e.dialogsPage.newMessageText,dialogs:e.dialogsPage.dialogs}}),(function(e){return{addMessage:function(t){e(function(e){return{type:C,newDialogBody:e}}(t))}}})),_)(W),V=n(10),K=n.n(V),Y=n(15),Z=n(134).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"ba964194-f87c-4642-b2f3-156ec9ed6f7e"}}),Q=function(e,t){return Z.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},X=function(e){return Z.post("follow/".concat(e)).then((function(e){return e.data}))},$=function(e){return Z.delete("follow/".concat(e)).then((function(e){return e.data}))},ee=function(){return Z.get("auth/me").then((function(e){return e.data}))},te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Z.post("auth/login",{email:e,password:t,rememberMe:n})},ne=function(){return Z.delete("auth/login")},re=function(e){return Z.get("profile/".concat(e)).then((function(e){return e.data}))},se=function(e){return Z.get("profile/status/".concat(e))},ae=function(e){return Z.put("profile/status/",{status:e})},ie=function(e){var t=new FormData;t.append("image",e);return Z.put("profile/photo/",t,{headers:{"content-type":"multipart/form-data"}})},oe=function(e){return Z.get("users?count=".concat(e)).then((function(e){return e.data}))},ce="SET_FRIENDS",ue="TOGGLE_IS_FETCHING",le={friends:[],pageSize:9,currentFriend:null,isFetching:!0},de=function(e){return{type:ue,isFetching:e}},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(x.a)(Object(x.a)({},e),{},{friends:Object(w.a)(t.friends)});case ue:return Object(x.a)(Object(x.a)({},e),{},{isFetching:t.isFetching});default:return e}},pe=n(96),fe=n.n(pe),he=n.p+"static/media/user-photo.db7ad394.webp",be=function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)(N.b,{to:"/profile/"+e.id,className:fe.a.friend,children:[Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:e.photo?e.photo:he,alt:""})}),Object(r.jsx)("div",{className:fe.a.name,children:e.name.length>6?e.name.slice(0,5)+"...":e.name})]})})},Oe=n(45),ge=n.n(Oe),me=function(e){var t=[{url:"/profile",link:"Profile"},{url:"/dialogs",link:"Messages"},{url:"/userpage",link:"Userpage"},{url:"/news",link:"News"},{url:"/music",link:"Music"},{url:"/settings",link:"Settings"}].map((function(e){return Object(r.jsx)("div",{className:ge.a.item,children:Object(r.jsx)(N.b,{to:e.url,activeClassName:ge.a.activeLink,children:e.link})})}));return Object(r.jsxs)("nav",{className:ge.a.nav,children:[t,Object(r.jsx)("h3",{className:ge.a.titleFriends,children:"Friends"}),Object(r.jsx)("div",{className:ge.a.friends,children:e.friends.map((function(e){return Object(r.jsx)(be,{name:e.name,photo:e.photos.small,id:e.id},e.id)}))})]})},xe=n.p+"static/media/preloader.1002aefe.svg",ve=function(){return Object(r.jsx)("div",{style:{maxWidth:"200px",margin:"0 auto"},children:Object(r.jsx)("img",{src:xe})})},_e=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getFriendsThunkCreator(this.props.pageSize)}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[this.props.isFetching?Object(r.jsx)(ve,{}):null,Object(r.jsx)(me,{friends:this.props.friends})]})}}]),n}(a.a.Component),we=Object(g.b)((function(e){return{friends:e.sidebar.friends,pageSize:e.sidebar.pageSize,isFetching:e.sidebar.isFetching}}),{getFriendsThunkCreator:function(e){return function(){var t=Object(Y.a)(K.a.mark((function t(n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(de(!0)),t.next=3,oe(e);case 3:r=t.sent,n(de(!1)),n((s=r.items,{type:ce,friends:s}));case 6:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()}})(_e),Ce="FOLLOW",ke="UNFOLLOW",Pe="SET-USERS",Se="SET_TOTAL_USERS_COUNT",ye="SET_CURRENT_PAGE",Te="TOGGLE_IS_FETCHING",Ne="TOGGLE_IS_FOLLOWING_PROGRESS",Ie={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},Fe=function(e){return{type:Ce,userId:e}},Ue=function(e){return{type:ke,userId:e}},Ee=function(e){return{type:Se,totalUsersCount:e}},De=function(e){return{type:Te,isFetching:e}},Ae=function(e,t){return{type:Ne,isFetching:e,userId:t}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return Object(x.a)(Object(x.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(x.a)(Object(x.a)({},e),{},{followed:!0}):e}))});case ke:return Object(x.a)(Object(x.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(x.a)(Object(x.a)({},e),{},{followed:!1}):e}))});case Pe:return Object(x.a)(Object(x.a)({},e),{},{users:Object(w.a)(t.users)});case ye:return Object(x.a)(Object(x.a)({},e),{},{currentPage:t.currentPage});case Se:return Object(x.a)(Object(x.a)({},e),{},{totalUsersCount:t.totalUsersCount});case Te:return Object(x.a)(Object(x.a)({},e),{},{isFetching:t.isFetching});case Ne:return Object(x.a)(Object(x.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(w.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},Me=n(28),ze=n(71),Be=n.n(ze),He=function(e){for(var t=e.totalItemsCount,n=e.pageSize,a=e.onPageChanged,i=e.currentPage,o=e.portionSize,c=void 0===o?10:o,u=Math.ceil(t/n),l=[],d=1;d<=u;d++)l.push(d);var j=Math.ceil(u/c),p=Object(s.useState)(1),f=Object(Me.a)(p,2),h=f[0],b=f[1],O=(h-1)*n+1,g=h*n;return Object(r.jsxs)("div",{className:Be.a.paginator,children:[h>1&&Object(r.jsx)("button",{onClick:function(){return b(h-1)},children:"Prev"}),Object(r.jsx)("div",{className:Be.a.pageNumbers,children:l.filter((function(e){return e>=O&&e<=g})).map((function(e){return Object(r.jsx)("span",{onClick:function(){a(e)},className:i===e&&Be.a.selectedPage,children:e})}))}),j>h&&Object(r.jsx)("button",{onClick:function(){return b(h+1)},children:"Next"})]})},Ge=n(56),Re=n.n(Ge),Je=function(e){var t=e.user,n=e.followingInProgress,s=e.followThunkCreator,a=e.unfollowThunkCreator;return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:Re.a.user,children:[Object(r.jsx)("div",{className:Re.a.photoUrl,children:Object(r.jsx)(N.b,{to:"/profile/"+t.id,children:Object(r.jsx)("img",{src:null!=t.photos.small?t.photos.small:he})})}),Object(r.jsx)("div",{children:t.followed?Object(r.jsx)("button",{disabled:n.some((function(e){return e===t.id})),className:Re.a.followBtn,onClick:function(){a(t.id)},children:"Unfollow"}):Object(r.jsx)("button",{disabled:n.some((function(e){return e===t.id})),className:Re.a.followBtn,onClick:function(){s(t.id)},children:"Follow"})}),Object(r.jsx)("div",{children:t.id}),Object(r.jsx)("div",{children:t.name}),Object(r.jsx)("div",{children:t.status}),Object(r.jsx)("div",{children:"user.location.city"}),Object(r.jsx)("div",{children:"user.location.country"})]})})},We=n(97),qe=n.n(We),Ve=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(He,{pageSize:e.pageSize,totalItemsCount:e.totalUsersCount,onPageChanged:e.onPageChanged,currentPage:e.currentPage}),Object(r.jsx)("div",{className:qe.a.users,children:Object(r.jsx)("div",{className:qe.a.usersInner,children:e.users.map((function(t){return Object(r.jsx)(Je,{user:t,followingInProgress:e.followingInProgress,followThunkCreator:e.followThunkCreator,unfollowThunkCreator:e.unfollowThunkCreator})}))})})]})},Ke=n(135),Ye=Object(Ke.a)((function(e){return e.userPage.users}),(function(e){return e.filter((function(e){return!0}))})),Ze=function(e){return e.userPage.pageSize},Qe=function(e){return e.userPage.totalUsersCount},Xe=function(e){return e.userPage.currentPage},$e=function(e){return e.userPage.isFetching},et=function(e){return e.userPage.followingInProgress},tt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.getUsersThunkCreator(t,e.props.pageSize)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[this.props.isFetching?Object(r.jsx)(ve,{}):null,Object(r.jsx)(Ve,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,users:this.props.users,currentPage:this.props.currentPage,followThunkCreator:this.props.followThunkCreator,unfollowThunkCreator:this.props.unfollowThunkCreator,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress})]})}}]),n}(a.a.Component),nt=Object(m.d)(Object(g.b)((function(e){return{users:Ye(e),pageSize:Ze(e),totalUsersCount:Qe(e),currentPage:Xe(e),isFetching:$e(e),followingInProgress:et(e)}}),{getUsersThunkCreator:function(e,t){return function(){var n=Object(Y.a)(K.a.mark((function n(r){var s;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:ye,currentPage:e}),r(De(!0)),n.next=4,Q(e,t);case 4:s=n.sent,r(De(!1)),r((a=s.items,{type:Pe,users:a})),r(Ee(s.totalCount));case 8:case"end":return n.stop()}var a}),n)})));return function(e){return n.apply(this,arguments)}}()},followThunkCreator:function(e){return function(){var t=Object(Y.a)(K.a.mark((function t(n){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Ae(!0,e)),t.next=3,X(e);case 3:0===t.sent.resultCode&&n(Fe(e)),n(Ae(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollowThunkCreator:function(e){return function(){var t=Object(Y.a)(K.a.mark((function t(n){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Ae(!0,e)),t.next=3,$(e);case 3:0===t.sent.resultCode&&n(Ue(e)),n(Ae(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setTotalUsersCount:Ee,toggleFollowingProgress:Ae}),_)(tt),rt=n(136),st=n.n(rt),at=n(98),it=n.n(at),ot=n(72),ct=n.n(ot),ut=function(e){return Object(r.jsxs)("div",{className:ct.a.active,children:[Object(r.jsx)("div",{className:ct.a.avatar,children:Object(r.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/ru/d/da/%D0%90%D0%B2%D0%B0%D1%82%D0%B0%D1%80_3.jpg",alt:""})}),Object(r.jsx)("div",{className:ct.a.message,children:e.message}),Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:[e.likeCount," likes"]})})]})},lt=G(10),dt=Object(E.a)({form:"newPost",onSubmitSuccess:function(e,t){return t(Object(U.a)("newPost"))}})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(F.a,{component:B,name:"newPost",validate:[H,lt],placeholder:"Add new post"})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Add post"})})]})})),jt=function(e){var t=e.posts.map((function(e){return Object(r.jsx)(ut,{message:e.post,likeCount:e.likeCount},e.id)}));return Object(r.jsxs)("div",{className:it.a.postsBlock,children:[Object(r.jsx)("h3",{children:"Posts"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(dt,{onSubmit:function(t){console.log(t),e.addPost(t.newPost)}}),Object(r.jsx)("div",{className:it.a.posts,children:t})]})]})},pt="ADD-POST",ft="DELETE_POST",ht="SET_USER_PROFILE",bt="SET_USER_STATUS",Ot="SAVE_PHOTO_SUCCESS",gt={posts:[{id:1,post:"Hi! How are you?",likeCount:10},{id:2,post:"I'm fine! Thanks! And you?",likeCount:11},{id:3,post:"I study React",likeCount:12}],profile:null,status:""},mt=function(e){return{type:bt,status:e}},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:var n={id:4,post:t.newPost,likeCount:0};return Object(x.a)(Object(x.a)({},e),{},{posts:[].concat(Object(w.a)(e.posts),[n]),newPostText:""});case ft:return Object(x.a)(Object(x.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.id}))});case ht:return Object(x.a)(Object(x.a)({},e),{},{profile:t.profile});case bt:return Object(x.a)(Object(x.a)({},e),{},{status:t.status});case Ot:return Object(x.a)(Object(x.a)({},e),{},{profile:Object(x.a)(Object(x.a)({},e.profile),{},{photos:t.photos})});default:return e}},vt=Object(g.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:pt,newPost:e}}(t))}}}))(jt),_t=n(39),wt=n.n(_t),Ct=function(e){var t=Object(s.useState)(!1),n=Object(Me.a)(t,2),a=n[0],i=n[1],o=Object(s.useState)(e.status),c=Object(Me.a)(o,2),u=c[0],l=c[1];Object(s.useEffect)((function(){l(e.status)}),[e.status]);return Object(r.jsxs)("div",{children:[!a&&Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:function(){i(!0)},children:e.status||"______"})}),a&&Object(r.jsx)("div",{children:Object(r.jsx)("input",{autoFocus:!0,onBlur:function(){i(!1),e.updateUserStatusThunkCreator(u)},value:u,onChange:function(e){l(e.currentTarget.value)}})})]})},kt=function(e){return e.profile?Object(r.jsx)("div",{className:wt.a.profileInfo,children:Object(r.jsxs)("div",{className:wt.a.descriptionBlock,children:[Object(r.jsx)("div",{className:wt.a.userPhoto,children:Object(r.jsx)("img",{src:e.profile.photos.large||he,alt:""})}),Object(r.jsx)("div",{children:e.isOwner&&Object(r.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}})}),Object(r.jsx)("h3",{children:e.profile.fullName}),Object(r.jsx)(Ct,{isOwner:e.isOwner,status:e.status,updateUserStatusThunkCreator:e.updateUserStatusThunkCreator}),Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"Looking for a job: "}),e.profile.lookingForAJob?"Yes":"No"]}),Object(r.jsx)("div",{children:e.profile.lookingForAJob&&Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"Skills: "}),e.profile.lookingForAJobDescription]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"About Me: "}),e.aboutMe]}),Object(r.jsx)("div",{children:e.profile.userId}),Object(r.jsx)("div",{className:wt.a.twitterIcon,children:null!=e.profile.contacts.twitter?Object(r.jsx)(N.b,{to:e.profile.contacts.twitter,children:Object(r.jsx)("img",{src:"https://cdn3.iconfinder.com/data/icons/picons-social/57/43-twitter-512.png"})}):""})]})}):Object(r.jsx)(ve,{})},Pt=function(e){return Object(r.jsxs)("div",{className:st.a.content,children:[Object(r.jsx)(kt,{profile:e.profile,status:e.status,isOwner:e.isOwner,updateUserStatusThunkCreator:e.updateUserStatusThunkCreator,savePhoto:e.savePhoto}),Object(r.jsx)(vt,{clearPost:e.clearPost})]})},St=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getProfileThunkCreator(e),this.props.getUserStatusThunkCreator(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(r.jsx)(Pt,Object(x.a)(Object(x.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,savePhoto:this.props.savePhoto,updateUserStatusThunkCreator:this.props.updateUserStatusThunkCreator}))}}]),n}(a.a.Component),yt=Object(m.d)(Object(g.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authorizedUserId:e.auth.userId}}),{getProfileThunkCreator:function(e){return function(){var t=Object(Y.a)(K.a.mark((function t(n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re(e);case 2:r=t.sent,n({type:ht,profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUserStatusThunkCreator:function(e){return function(){var t=Object(Y.a)(K.a.mark((function t(n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(e);case 2:r=t.sent,n(mt(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatusThunkCreator:function(e){return function(){var t=Object(Y.a)(K.a.mark((function t(n){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(e);case 2:0===t.sent.data.resultCode&&n(mt(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(Y.a)(K.a.mark((function t(n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie(e);case 2:0===(r=t.sent).data.resultCode&&n((s=r.data.data.photos,{type:Ot,photos:s}));case 4:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()}}),O.f)(St),Tt="SET_AUTH_DATA",Nt={userId:null,login:null,email:null,isAuth:!1},It=function(e,t,n,r){return{type:Tt,payload:{userId:e,login:t,email:n,isAuth:r}}},Ft=function(){return function(){var e=Object(Y.a)(K.a.mark((function e(t){var n,r,s,a,i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:0===(n=e.sent).resultCode&&(r=n.data,s=r.id,a=r.login,i=r.email,t(It(s,a,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tt:return Object(x.a)(Object(x.a)({},e),t.payload);default:return e}},Et=n(73),Dt=n.n(Et),At=function(e){var t=Object(s.useState)(new Date),n=Object(Me.a)(t,2),a=n[0],i=n[1];return Object(s.useEffect)((function(){var e=setInterval((function(){i(new Date)}),1e3);return function(){return clearInterval(e)}})),Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:Dt.a.time,children:[Object(r.jsx)("div",{className:Dt.a.timer,children:a.toLocaleTimeString()}),Object(r.jsx)("div",{className:Dt.a.date,children:a.toLocaleDateString()})]})})},Lt=n(57),Mt=n.n(Lt),zt=function(e){return Object(r.jsxs)("header",{className:Mt.a.header,children:[Object(r.jsx)("img",{src:"https://placeit-assets1.s3-accelerate.amazonaws.com/custom-pages/technology-logo-maker-lp/online-logo-design-template-for-an-eco-tech-company-2176l-206-el-1024x1024.png",alt:""}),Object(r.jsx)(At,{}),Object(r.jsx)("div",{children:e.isAuth?Object(r.jsxs)("div",{children:[Object(r.jsx)(N.b,{to:"/profile",className:Mt.a.login,children:e.login}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{className:Mt.a.logout,onClick:e.logoutThunkCreator,children:"Logout"})})]}):Object(r.jsx)(N.b,{to:"/login",className:Mt.a.login,children:"Login"})})]})},Bt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsx)(zt,Object(x.a)({},this.props))}}]),n}(a.a.Component),Ht=Object(g.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logoutThunkCreator:function(){return function(){var e=Object(Y.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:0===e.sent.data.resultCode&&t(It(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Bt),Gt=Object(E.a)({form:"login"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(F.a,{name:"email",component:z,validate:[H],placeholder:"email"})}),Object(r.jsx)("div",{children:Object(r.jsx)(F.a,{name:"password",component:z,validate:[H],placeholder:"password",type:"password"})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(F.a,{name:"rememberMe",component:z,type:"checkbox"})," Remember Me"]}),e.error&&Object(r.jsx)("div",{className:L.a.formSubmitError,children:e.error}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]})})),Rt=Object(g.b)((function(e){return{isAuth:e.auth.isAuth}}),{loginThunkCreator:function(e,t,n){return function(){var r=Object(Y.a)(K.a.mark((function r(s){var a,i;return K.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,te(e,t,n);case 2:0===(a=r.sent).data.resultCode?s(Ft()):(i=a.data.messages.length>0?a.data.messages[0]:"Some Error",s(Object(U.b)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(r.jsx)(O.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"LOGIN"}),Object(r.jsx)(Gt,{onSubmit:function(t){e.loginThunkCreator(t.email,t.password,t.rememberMe)}})]})})),Jt="INITIALIZED_SUCCESS",Wt={initialized:!1},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt:return Object(x.a)(Object(x.a)({},e),{},{initialized:!0});default:return e}},Vt=n(137),Kt=n(130),Yt=Object(m.c)({profilePage:xt,dialogsPage:P,sidebar:je,userPage:Le,auth:Ut,form:Kt.a,app:qt}),Zt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,Qt=Object(m.e)(Yt,Zt(Object(m.a)(Vt.a)));window.store=Qt;var Xt=Qt,$t=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(Ht,{}),Object(r.jsx)(we,{store:this.props.store}),Object(r.jsx)("div",{className:"app-wrapper-content",children:Object(r.jsxs)("div",{className:"app-wrapper-content-inner",children:[Object(r.jsx)(O.b,{path:"/dialogs",render:function(){return Object(r.jsx)(q,{})}}),Object(r.jsx)(O.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(yt,{})}}),Object(r.jsx)(O.b,{path:"/userpage",render:function(){return Object(r.jsx)(nt,{})}}),Object(r.jsx)(O.b,{path:"/music",render:function(){return Object(r.jsx)(j,{})}}),Object(r.jsx)(O.b,{path:"/news",render:function(){return Object(r.jsx)(h,{})}}),Object(r.jsx)(O.b,{path:"/settings",render:function(){return Object(r.jsx)(b,{})}}),Object(r.jsx)(O.b,{path:"/login",render:function(){return Object(r.jsx)(Rt,{})}})]})})]})}}]),n}(a.a.Component),en=Object(g.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(Ft());Promise.all([t]).then((function(){e({type:Jt})}))}}})($t),tn=function(e){return Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(N.a,{children:Object(r.jsx)(g.a,{store:Xt,children:Object(r.jsx)(en,{})})})})},nn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,293)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),s(e),a(e),i(e)}))};o.a.render(Object(r.jsx)(tn,{}),document.getElementById("root")),nn()},30:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__dEFAE",dialogsItems:"Dialogs_dialogsItems__29zWT",dialog:"Dialogs_dialog__1phCH",activeLink:"Dialogs_activeLink__2LwNu",messages:"Dialogs_messages__2g-vD",message:"Dialogs_message__vrFP3"}},39:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__bht1e",userPhoto:"ProfileInfo_userPhoto__jk5fS",twitterIcon:"ProfileInfo_twitterIcon__1C7vn",profileInfo:"ProfileInfo_profileInfo__38CSE"}},45:function(e,t,n){e.exports={nav:"Navbar_nav__lGShJ",item:"Navbar_item__3wQyV",activeLink:"Navbar_activeLink__21y3q",titleFriends:"Navbar_titleFriends__3zCxM",friends:"Navbar_friends__2QLB0"}},53:function(e,t,n){e.exports={formControl:"FormControls_formControl__27WZ_",error:"FormControls_error__2i2_3",formSubmitError:"FormControls_formSubmitError__F32b9"}},56:function(e,t,n){e.exports={photoUrl:"User_photoUrl__1ZhjI",user:"User_user__1zTc5"}},57:function(e,t,n){e.exports={header:"Header_header__1xFvM",login:"Header_login__3xfKx",logout:"Header_logout__2gAHT"}},71:function(e,t,n){e.exports={paginator:"Pagination_paginator__2kLoc",pageNumbers:"Pagination_pageNumbers__3VvED",selectedPage:"Pagination_selectedPage__2LDwh"}},72:function(e,t,n){e.exports={active:"Post_active__7Du86",message:"Post_message__2biq3"}},73:function(e,t,n){e.exports={time:"Clock_time__1Whmw",timer:"Clock_timer__2gT45",date:"Clock_date__1JK8H"}},96:function(e,t,n){e.exports={friend:"Friend_friend__2AbAp",name:"Friend_name__5ceMW"}},97:function(e,t,n){e.exports={users:"UserPage_users__3qNn7",usersInner:"UserPage_usersInner__2lImM"}},98:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__283BJ",posts:"MyPosts_posts__zP43-"}}},[[292,1,2]]]);
//# sourceMappingURL=main.fde90e0e.chunk.js.map